
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üå≥ Level 0 Affordances Test ‚Äì v4</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      background-color: #f9f9f9;
      color: #111;
      padding: 20px;
      margin: 0;
      text-align: center;
    }
    h1 {
      font-size: 2em;
      margin-bottom: 10px;
    }
    .timer {
      font-size: 1.2em;
      margin-bottom: 20px;
    }
    .branch {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      margin: 20px 0;
    }
    .branch.right {
      align-items: flex-end;
    }
    .branch-header {
      font-weight: bold;
      font-size: 1.1em;
      margin-bottom: 8px;
    }
    .leaf {
      background-color: #e0f7e0;
      border-left: 4px solid #4CAF50;
      padding: 8px 12px;
      margin: 4px 0;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      text-align: left;
    }
    .leaf::before {
      content: "üçÉ ";
    }
    #question {
      margin-top: 30px;
      font-size: 1.2em;
      font-weight: 500;
    }
    .options {
      margin-top: 10px;
    }
    .options button, #restart {
      background-color: #007bff;
      color: white;
      border: none;
      padding: 10px 16px;
      margin: 5px;
      border-radius: 6px;
      font-size: 1em;
      cursor: pointer;
    }
    .options button:hover, #restart:hover {
      background-color: #0056b3;
    }
    #restart {
      background-color: #555;
    }
    .tree-container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
  </style>
</head>
<body>
  <h1>üå≥ Level 0 Affordances Test ‚Äì v4</h1>
  <div class="timer">‚è±Ô∏è Time: <span id="timer">0.00s</span></div>

  <div class="tree-container" id="tree"></div>

  <div id="question">Loading‚Ä¶</div>
  <div class="options">
    <button id="optionA">Option A</button>
    <button id="optionB">Option B</button>
  </div>

  <button id="restart">üîÑ Start Again</button>

  <script>
    const stakeholders = [
      { name: "Founders", affordances: [
        "(1) Platform custodianship",
        "(2) Roadmap control",
        "(3) Protocol definition authority"
      ]},
      { name: "Core Developers", affordances: [
        "(1) Build MVP backend",
        "(2) Build MVP frontend",
        "(3) Leaderboard",
        "(4) Claims",
        "(5) Explorer",
        "(6) Wallet flow",
        "(7) Publish Protocol Schema Draft"
      ]},
      { name: "Marketing & Operations", affordances: [
        "(1) Website publishing",
        "(2) Whitepaper comms",
        "(3) Community touchpoints (Telegram, CMC)"
      ]},
      { name: "Players", affordances: [
        "(1) Enter main game",
        "(2) Receive scores",
        "(3) Claim mock rewards",
        "(4) Appear in explorer"
      ]},
      { name: "3rd-Party GQT Creators", affordances: [
        "(1) Protocol documentation available; cannot publish GQTs but can design around the config"
      ]},
      { name: "Reward Pool Organisers", affordances: [
        "(1) View mock tournament/claim logic",
        "(2) Can simulate fees, not route real tokens"
      ]},
      { name: "Stakers", affordances: [
        "(1) No action at MVP; staking mechanics not live, no reward influence"
      ]},
      { name: "Ecosystem Builders", affordances: [
        "(1) See structure of GQT/score claims; can architect future layers"
      ]},
      { name: "CGT Service Providers", affordances: [
        "(1) Begin identifying integration and monitoring opportunities"
      ]},
      { name: "DAO / Sub-DAOs", affordances: [
        "(1) No governance control or fund routing; passive observation only"
      ]}
    ];

    let current = 0;
    let currentAff = 0;
    let timeStart;
    const tree = document.getElementById("tree");
    const timerDisplay = document.getElementById("timer");
    const question = document.getElementById("question");
    const [btnA, btnB] = [document.getElementById("optionA"), document.getElementById("optionB")];

    function shuffleOptions(correct, stakeholder) {
      const others = stakeholders.map(s => s.name).filter(n => n !== stakeholder.name);
      const wrong = others[Math.floor(Math.random() * others.length)];
      return Math.random() > 0.5 ? [correct, wrong] : [wrong, correct];
    }

    function updateTimer() {
      const now = performance.now();
      timerDisplay.textContent = ((now - timeStart) / 1000).toFixed(2) + "s";
    }

    function renderTree() {
      tree.innerHTML = "";
      stakeholders.forEach((s, i) => {
        const branch = document.createElement("div");
        branch.className = `branch ${i % 2 === 0 ? "" : "right"}`;
        const header = document.createElement("div");
        header.className = "branch-header";
        header.textContent = "üåø " + s.name;
        branch.appendChild(header);

        if (i < current || (i === current && currentAff > 0)) {
          for (let j = 0; j < (i < current ? s.affordances.length : currentAff); j++) {
            const leaf = document.createElement("div");
            leaf.className = "leaf";
            leaf.textContent = s.affordances[j];
            branch.appendChild(leaf);
          }
        }

        tree.appendChild(branch);
      });
    }

    function nextQuestion() {
      if (current >= stakeholders.length) return;
      if (currentAff >= stakeholders[current].affordances.length) {
        current++;
        currentAff = 0;
      }
      if (current >= stakeholders.length) {
        question.textContent = "üéâ All affordances placed correctly!";
        btnA.style.display = "none";
        btnB.style.display = "none";
        return;
      }
      const s = stakeholders[current];
      const aff = s.affordances[currentAff];
      const [opt1, opt2] = shuffleOptions(s.name, s);
      question.textContent = `Which stakeholder matches this affordance? ${aff}`;
      btnA.textContent = opt1;
      btnB.textContent = opt2;
    }

    function handleChoice(choice) {
      const correct = stakeholders[current].name;
      if (choice === correct) {
        currentAff++;
        renderTree();
        nextQuestion();
      } else {
        alert("‚ùå Incorrect! Try again.");
      }
    }

    function resetGame() {
      current = 0;
      currentAff = 0;
      timeStart = performance.now();
      btnA.style.display = "inline-block";
      btnB.style.display = "inline-block";
      renderTree();
      nextQuestion();
    }

    btnA.onclick = () => handleChoice(btnA.textContent);
    btnB.onclick = () => handleChoice(btnB.textContent);
    document.getElementById("restart").onclick = resetGame;

    timeStart = performance.now();
    setInterval(updateTimer, 100);
    resetGame();
  </script>
</body>
</html>
