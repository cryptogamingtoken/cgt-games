
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>üå≥ Level 0 Affordances Test ‚Äì v2</title>
  <style>
    body {{
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #eef6f7;
    }}
    h1 {{
      text-align: center;
      padding: 20px 0 10px 0;
    }}
    #timer {{
      text-align: center;
      font-size: 1em;
      margin-bottom: 10px;
      color: #444;
    }}
    .tree-container {{
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-bottom: 100px;
    }}
    .branch {{
      border-left: 4px solid #4CAF50;
      background: #fff;
      margin: 20px;
      padding: 10px 20px;
      width: 90%;
      max-width: 600px;
      border-radius: 6px;
      box-shadow: 0 0 4px rgba(0,0,0,0.1);
    }}
    .branch-right {{
      align-self: flex-end;
      border-left: none;
      border-right: 4px solid #4CAF50;
      text-align: right;
    }}
    .branch h2 {{
      margin: 0 0 10px 0;
      font-size: 1.2em;
      color: #2c3e50;
    }}
    .leaf {{
      margin: 5px 0;
      padding: 8px 12px;
      background-color: #e0f7e9;
      border-left: 4px solid #2ecc71;
      border-radius: 4px;
      animation: fadeIn 0.4s ease-in;
    }}
    .branch-right .leaf {{
      background-color: #e6f0fa;
      border-left: none;
      border-right: 4px solid #3498db;
    }}
    @keyframes fadeIn {{
      from {{ opacity: 0; transform: translateY(-10px); }}
      to {{ opacity: 1; transform: translateY(0); }}
    }}
    .question-box {{
      position: fixed;
      bottom: 0;
      width: 100%;
      background: #fff;
      border-top: 2px solid #ccc;
      text-align: center;
      padding: 15px 10px;
    }}
    .question-text {{
      margin-bottom: 10px;
      font-size: 1.1em;
    }}
    .btn-row {{
      display: flex;
      justify-content: center;
      gap: 15px;
    }}
    .choice-btn {{
      padding: 10px 18px;
      font-size: 1em;
      border: none;
      border-radius: 6px;
      background: #3498db;
      color: white;
      cursor: pointer;
    }}
    .choice-btn:hover {{
      background: #2c80b4;
    }}
    #restart-btn {{
      margin-top: 10px;
      padding: 8px 16px;
      background: #2ecc71;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }}
    #restart-btn:hover {{
      background: #27ae60;
    }}
  </style>
</head>
<body>

<h1>üå≥ Level 0 Affordances Test ‚Äì v2</h1>
<div id="timer">‚è±Ô∏è Time: 0.00s</div>
<div class="tree-container" id="tree"></div>

<div class="question-box">
  <div class="question-text" id="question">Loading...</div>
  <div class="btn-row">
    <button class="choice-btn" onclick="submitChoice(0)" id="btn0">Option A</button>
    <button class="choice-btn" onclick="submitChoice(1)" id="btn1">Option B</button>
  </div>
  <button id="restart-btn" onclick="startGame()">üîÅ Start Again</button>
</div>

<script>
const stakeholders = [{"name": "Founders", "affordances": ["(1) Platform custodianship", "(2) Roadmap control", "(3) Protocol definition authority"]}, {"name": "Core Developers", "affordances": ["(1) Build MVP backend", "(2) Build MVP frontend", "(3) Leaderboard", "(4) Claims", "(5) Explorer", "(6) Wallet flow", "(7) Publish Protocol Schema Draft"]}, {"name": "Marketing & Operations", "affordances": ["(1) Website publishing", "(2) Whitepaper comms", "(3) Community touchpoints (Telegram, CMC)"]}, {"name": "Players", "affordances": ["(1) Enter main game", "(2) Receive scores", "(3) Claim mock rewards", "(4) Appear in explorer"]}, {"name": "3rd-Party GQT Creators", "affordances": ["(1) Protocol documentation available; cannot publish GQTs but can design around the config"]}, {"name": "Reward Pool Organisers", "affordances": ["(1) View mock tournament/claim logic", "(2) Can simulate fees, not route real tokens"]}, {"name": "Stakers", "affordances": ["(1) No action at MVP; staking mechanics not live, no reward influence"]}, {"name": "Ecosystem Builders", "affordances": ["(1) See structure of GQT/score claims; can architect future layers"]}, {"name": "CGT Service Providers", "affordances": ["(1) Begin identifying integration and monitoring opportunities"]}, {"name": "DAO / Sub-DAOs", "affordances": ["(1) No governance control or fund routing; passive observation only"]}];

let currentStakeholderIndex = 0;
let currentAffordanceIndex = 0;
let correctAnswer = "";
let choices = [];
let timerInterval;
let startTime = 0;

function shuffle(arr) {{
  for (let i = arr.length - 1; i > 0; i--) {{
    let j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }}
}}

function updateTimer() {{
  const time = ((Date.now() - startTime) / 1000).toFixed(2);
  document.getElementById("timer").innerText = "‚è±Ô∏è Time: " + time + "s";
}}

function presentNextQuestion() {{
  if (currentStakeholderIndex >= stakeholders.length) {{
    document.getElementById("question").innerText = "üéâ All affordances completed!";
    clearInterval(timerInterval);
    return;
  }}

  const s = stakeholders[currentStakeholderIndex];
  const aList = s.affordances;

  if (currentAffordanceIndex >= aList.length) {{
    currentStakeholderIndex++;
    currentAffordanceIndex = 0;
    presentNextQuestion();
    return;
  }}

  correctAnswer = aList[currentAffordanceIndex];
  let wrongOptions = [];

  stakeholders.forEach((other, idx) => {{
    if (idx !== currentStakeholderIndex) {{
      wrongOptions.push(...other.affordances);
    }}
  }});

  const wrong = wrongOptions[Math.floor(Math.random() * wrongOptions.length)];
  choices = [correctAnswer, wrong];
  shuffle(choices);

  document.getElementById("question").innerText = `Which is a Level 0 affordance of ${s.name}?`;
  document.getElementById("btn0").innerText = choices[0];
  document.getElementById("btn1").innerText = choices[1];
}}

function submitChoice(index) {{
  if (choices[index] === correctAnswer) {{
    const s = stakeholders[currentStakeholderIndex];
    const leaf = document.createElement("div");
    leaf.className = "leaf";
    leaf.innerText = correctAnswer;
    document.getElementById("leaves-" + currentStakeholderIndex).appendChild(leaf);
    currentAffordanceIndex++;
    setTimeout(() => {{
      window.scrollTo({{ top: document.body.scrollHeight, behavior: 'smooth' }});
      presentNextQuestion();
    }}, 300);
  }} else {{
    alert("‚ùå Try again");
  }}
}}

function startGame() {{
  document.getElementById("tree").innerHTML = "";
  currentStakeholderIndex = 0;
  currentAffordanceIndex = 0;
  startTime = Date.now();
  clearInterval(timerInterval);
  timerInterval = setInterval(updateTimer, 100);

  stakeholders.forEach((s, i) => {{
    const branch = document.createElement("div");
    branch.className = "branch " + (i %% 2 === 0 ? "branch-left" : "branch-right");
    branch.id = "branch-" + i;
    branch.innerHTML = `
      <h2>${{s.name}}</h2>
      <div class="leaves" id="leaves-${{i}}"></div>
    `;
    document.getElementById("tree").appendChild(branch);
  }});

  presentNextQuestion();
}}

startGame();
</script>

</body>
</html>
