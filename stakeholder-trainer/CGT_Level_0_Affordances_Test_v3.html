
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üå≥ Level 0 Affordances Test ‚Äì v3</title>
    <style>
        body {
            font-family: "Segoe UI", sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 2vh 1vw;
            box-sizing: border-box;
        }
        h1 {
            font-size: 2em;
            text-align: center;
            margin-bottom: 0.5em;
        }
        .timer {
            text-align: center;
            font-size: 1.2em;
            margin-bottom: 1em;
        }
        .tree-container {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
        }
        .stakeholder-block {
            margin-bottom: 2em;
            position: relative;
        }
        .stakeholder-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 0.5em;
            display: flex;
            align-items: center;
            gap: 0.5em;
        }
        .affordance-list {
            display: flex;
            flex-direction: column;
            gap: 0.5em;
            padding-left: 1.5em;
            border-left: 3px solid #4caf50;
            position: relative;
        }
        .affordance-item {
            background: #e0f2f1;
            border-radius: 8px;
            padding: 0.5em 1em;
            box-shadow: 1px 1px 4px rgba(0, 0, 0, 0.1);
            font-size: 0.95em;
        }
        .question-block {
            text-align: center;
            margin-top: 2em;
        }
        .question-text {
            font-size: 1.2em;
            margin-bottom: 1em;
        }
        .answer-buttons {
            display: flex;
            justify-content: center;
            gap: 1em;
            margin-bottom: 3em;
        }
        button {
            padding: 0.6em 1.2em;
            font-size: 1em;
            border: none;
            border-radius: 8px;
            background-color: #4285f4;
            color: white;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.2s ease-in-out;
        }
        button:hover {
            background-color: #3367d6;
        }
        #restart-btn {
            position: fixed;
            bottom: 1em;
            right: 1em;
            background-color: #555;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <h1>üå≥ Level 0 Affordances Test ‚Äì v3</h1>
    <div class="timer">‚è±Ô∏è Time: <span id="timer">0.00s</span></div>
    <div class="tree-container" id="tree"></div>

    <div class="question-block">
        <div class="question-text" id="question">Loading...</div>
        <div class="answer-buttons">
            <button id="optionA">Option A</button>
            <button id="optionB">Option B</button>
        </div>
    </div>

    <button id="restart-btn">üîÅ Start Again</button>

    <script>
        const stakeholders = {
            "Founders": [
                "(1) Platform custodianship",
                "(2) Roadmap control",
                "(3) Protocol definition authority"
            ],
            "Core Developers": [
                "(1) Build MVP backend",
                "(2) Build MVP frontend",
                "(3) Leaderboard",
                "(4) Claims",
                "(5) Explorer",
                "(6) Wallet flow",
                "(7) Publish Protocol Schema Draft"
            ],
            "Marketing & Operations": [
                "(1) Website publishing",
                "(2) Whitepaper comms",
                "(3) Community touchpoints (Telegram, CMC)"
            ],
            "Players": [
                "(1) Enter main game",
                "(2) Receive scores",
                "(3) Claim mock rewards",
                "(4) Appear in explorer"
            ],
            "3rd-Party GQT Creators": [
                "(1) Protocol documentation available; cannot publish GQTs but can design around the config"
            ],
            "Reward Pool Organisers": [
                "(1) View mock tournament/claim logic",
                "(2) Can simulate fees, not route real tokens"
            ],
            "Stakers": [
                "(1) No action at MVP; staking mechanics not live, no reward influence"
            ],
            "Ecosystem Builders": [
                "(1) See structure of GQT/score claims; can architect future layers"
            ],
            "CGT Service Providers": [
                "(1) Begin identifying integration and monitoring opportunities"
            ],
            "DAO / Sub-DAOs": [
                "(1) No governance control or fund routing; passive observation only"
            ]
        };

        const stakeholderNames = Object.keys(stakeholders);
        const allAffordances = stakeholderNames.flatMap(name => 
            stakeholders[name].map(aff => ({ stakeholder: name, text: aff }))
        );
        let currentIndex = 0;
        let startTime = null;
        let interval = null;

        const tree = document.getElementById("tree");
        const question = document.getElementById("question");
        const timerEl = document.getElementById("timer");
        const optionA = document.getElementById("optionA");
        const optionB = document.getElementById("optionB");

        const startGame = () => {
            tree.innerHTML = "";
            currentIndex = 0;
            startTime = Date.now();
            clearInterval(interval);
            interval = setInterval(() => {
                const now = Date.now();
                const elapsed = ((now - startTime) / 1000).toFixed(2);
                timerEl.textContent = `${elapsed}s`;
            }, 100);

            stakeholderNames.forEach((name, i) => {
                const block = document.createElement("div");
                block.className = "stakeholder-block";
                block.id = `block-${name}`;
                block.innerHTML = `
                    <div class="stakeholder-title">üåø <span>${name}</span></div>
                    <div class="affordance-list" id="list-${name}"></div>
                `;
                tree.appendChild(block);
            });

            nextQuestion();
        };

        const nextQuestion = () => {
            if (currentIndex >= allAffordances.length) {
                clearInterval(interval);
                question.textContent = "‚úÖ All affordances complete!";
                optionA.style.display = "none";
                optionB.style.display = "none";
                return;
            }

            const correct = allAffordances[currentIndex];
            const wrong = allAffordances.find(a => a.stakeholder !== correct.stakeholder);
            const order = Math.random() > 0.5;

            question.textContent = `Which stakeholder matches this affordance?
${correct.text}`;
            optionA.textContent = order ? correct.stakeholder : wrong.stakeholder;
            optionB.textContent = order ? wrong.stakeholder : correct.stakeholder;

            const handleClick = (selected) => {
                const chosen = selected === "A" ? optionA.textContent : optionB.textContent;
                if (chosen === correct.stakeholder) {
                    const list = document.getElementById(`list-${correct.stakeholder}`);
                    const item = document.createElement("div");
                    item.className = "affordance-item";
                    item.textContent = correct.text;
                    list.appendChild(item);
                    currentIndex++;
                    nextQuestion();
                } else {
                    // Optional: show feedback for wrong answer
                }
            };

            optionA.onclick = () => handleClick("A");
            optionB.onclick = () => handleClick("B");
        };

        document.getElementById("restart-btn").onclick = () => {
            optionA.style.display = "inline-block";
            optionB.style.display = "inline-block";
            startGame();
        };

        startGame();
    </script>
</body>
</html>
