
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>üå≥ Level 0 Affordances Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #f0f5f7;
      overflow-x: hidden;
    }

    h1 {
      text-align: center;
      padding: 20px 10px 0 10px;
    }

    #timer {
      text-align: center;
      margin-bottom: 10px;
      color: #555;
    }

    .tree-container {
      max-width: 600px;
      margin: 0 auto;
      padding: 0 20px 40px 20px;
    }

    .branch {
      margin: 20px 0;
      padding-left: 10px;
      border-left: 3px solid #4CAF50;
    }

    .branch h2 {
      margin: 0 0 10px 0;
      color: #2c3e50;
    }

    .leaf {
      margin-left: 15px;
      margin-bottom: 6px;
      padding: 8px 12px;
      background-color: #e0f7e9;
      border-left: 4px solid #2ecc71;
      border-radius: 4px;
      animation: fadeIn 0.4s ease-in;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .question-box {
      position: sticky;
      bottom: 0;
      background: #fff;
      border-top: 1px solid #ccc;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 15px 10px;
    }

    .question-text {
      margin-bottom: 10px;
      font-size: 1.1em;
    }

    .btn-row {
      display: flex;
      gap: 15px;
    }

    .choice-btn {
      padding: 10px 18px;
      font-size: 1em;
      border: none;
      border-radius: 6px;
      background: #3498db;
      color: white;
      cursor: pointer;
    }

    .choice-btn:hover {
      background: #2c80b4;
    }

    #restart-btn {
      margin-top: 20px;
      padding: 10px 20px;
      background: #2ecc71;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    #restart-btn:hover {
      background: #27ae60;
    }
  </style>
</head>
<body>

<h1>üå≥ Level 0 Affordances Test</h1>
<div id="timer">‚è±Ô∏è Time: 0.00s</div>

<div class="tree-container" id="tree">
  <div class="branch" id="branch-0">
    <h2>üåø Founders</h2>
    <div class="leaves" id="leaves-0"></div>
  </div>
</div>

<div class="question-box" id="question-box">
  <div class="question-text" id="question">Loading...</div>
  <div class="btn-row">
    <button class="choice-btn" onclick="submitChoice(0)" id="btn0">A</button>
    <button class="choice-btn" onclick="submitChoice(1)" id="btn1">B</button>
  </div>
  <button id="restart-btn" onclick="startGame()">üîÅ Start Again</button>
</div>

<script>
const stakeholders = [
  {
    name: "Founders",
    affordances: [
      "Platform custodianship",
      "Roadmap control",
      "Protocol definition authority"
    ]
  }
];

let currentAffordanceIndex = 0;
let currentChoices = [];
let correctAnswer = "";
let timerInterval;
let startTime;

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

function updateTimer() {
  const timeElapsed = ((Date.now() - startTime) / 1000).toFixed(2);
  document.getElementById("timer").innerText = `‚è±Ô∏è Time: ${timeElapsed}s`;
}

function presentNextAffordance() {
  if (currentAffordanceIndex >= stakeholders[0].affordances.length) {
    clearInterval(timerInterval);
    document.getElementById("question").innerText = "üéâ Completed!";
    return;
  }

  correctAnswer = stakeholders[0].affordances[currentAffordanceIndex];
  const wrong = "Incorrect distractor " + (currentAffordanceIndex + 1);
  currentChoices = [correctAnswer, wrong];
  shuffle(currentChoices);

  document.getElementById("question").innerText = `What is a Level 0 affordance of Founders?`;
  document.getElementById("btn0").innerText = currentChoices[0];
  document.getElementById("btn1").innerText = currentChoices[1];
}

function submitChoice(choiceIndex) {
  if (currentChoices[choiceIndex] === correctAnswer) {
    const leaf = document.createElement("div");
    leaf.className = "leaf";
    leaf.innerText = correctAnswer;
    document.getElementById("leaves-0").appendChild(leaf);
    currentAffordanceIndex++;
    setTimeout(presentNextAffordance, 300);
    setTimeout(() => window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' }), 400);
  } else {
    alert("‚ùå Try again");
  }
}

function startGame() {
  clearInterval(timerInterval);
  startTime = Date.now();
  timerInterval = setInterval(updateTimer, 100);
  currentAffordanceIndex = 0;
  document.getElementById("leaves-0").innerHTML = "";
  presentNextAffordance();
}

startGame();
</script>

</body>
</html>
